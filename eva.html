<!doctype html>
<html dir="rtl" lang="fa" data-theme="light">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title data-i18n-en="Chemical Farm" data-i18n-fa="کمیکال فارم ">Chemical Farm | Acetaldehyde</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;family=Space+Grotesk:wght@400;500;600&amp;family=Vazirmatn:wght@300;400;500;600;700;800&amp;display=swap" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet"/>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<style>
        :root {
            --primary: #0d9488;
            --primary-light: #14b8a6;
            --secondary: #2563eb;
            --danger: #fb7185;
            --warning: #fbbf24;
            --success: #22c55e;
            --dark: #0f172a;
            --light: #f8fafc;
            --gray: rgba(15,23,42,0.10);
            --card-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.07), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --card-hover: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            --glow-primary: 0 0 22px rgba(13, 148, 136, 0.22);
            --glow-secondary: 0 0 22px rgba(37, 99, 235, 0.22);
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Vazirmatn','Inter', sans-serif;
            background: linear-gradient(135deg, #f0fdfa 0%, #eff6ff 100%);
            color: var(--dark);
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        header {
            background: linear-gradient(120deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 35px 0;
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: var(--card-shadow), var(--glow-primary);
            position: relative;
            overflow: hidden;
            z-index: 1;
            transform: translateY(0);
            animation: headerFloat 6s ease-in-out infinite;
        }
        @keyframes headerFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        header::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 70%);
            transform: rotate(30deg);
            z-index: -1;
            animation: rotate 20s linear infinite;
        }
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 30px;
        }
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .logo i {
            font-size: 2rem;
            background: rgba(255,255,255,0.15);
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255,255,255,0.4); }
            70% { box-shadow: 0 0 0 15px rgba(255,255,255,0); }
            100% { box-shadow: 0 0 0 0 rgba(255,255,255,0); }
        }
        .logo h1 {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.8rem;
            font-weight: 600;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .search-container {
            position: relative;
            max-width: 500px;
            width: 100%;
        }
        .search-container i {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: rgba(255,255,255,0.7);
            font-size: 1.1rem;
        }
        #search-input {
            width: 100%;
            padding: 14px 20px 14px 45px;
            border-radius: 15px;
            border: 1px solid rgba(255,255,255,0.2);
            background: rgba(255,255,255,0.1);
            color: white;
            font-size: 1rem;
            transition: var(--transition);
            backdrop-filter: blur(10px);
        }
        #search-input::placeholder {
            color: rgba(255,255,255,0.7);
        }
        #search-input:focus {
            outline: none;
            border-color: rgba(255,255,255,0.4);
            box-shadow: 0 0 0 3px rgba(255,255,255,0.1), var(--glow-primary);
        }
        
        /* Header actions (Home + Language) */
        .header-actions{
            display:flex;
            align-items:center;
            gap:10px;
        }
        .hdr-btn{
            display:inline-flex;
            align-items:center;
            gap:10px;
            padding: 12px 16px;
            border-radius: 15px;
            border: 1px solid rgba(255,255,255,0.22);
            background: rgba(255,255,255,0.10);
            color: white;
            font-size: 0.98rem;
            font-weight: 600;
            text-decoration: none;
            cursor: pointer;
            transition: var(--transition);
            backdrop-filter: blur(10px);
        }
        .hdr-btn i{ opacity: .9; }
        .hdr-btn:hover{
            transform: translateY(-2px);
            box-shadow: var(--card-hover), var(--glow-secondary);
            border-color: rgba(255,255,255,0.35);
            background: rgba(255,255,255,0.14);
        }
        .hdr-btn:active{ transform: translateY(0); }
        .hdr-btn.lang{
            border: 1px solid rgba(255,255,255,0.28);
        }
        #langLabel{
            font-family: 'Space Grotesk','Vazirmatn','Inter',sans-serif;
            font-weight: 700;
            letter-spacing: .6px;
        }

        /* Language toggling */
        html[lang="fa"] body{ direction: rtl; }
        html[lang="fa"] .container{ direction: rtl; }
        html[lang="fa"] .product-name,
        html[lang="fa"] .section-title,
        html[lang="fa"] .market-title,
        html[lang="fa"] .companies-title,
        html[lang="fa"] .applications-title,
        html[lang="fa"] .feedstock-title,
        html[lang="fa"] .molecular-title{
            font-family:'Vazirmatn','Space Grotesk','Inter',sans-serif;
        }
.product-header {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 30px;
            margin-bottom: 30px;
            align-items: center;
            animation: fadeIn 0.5s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .product-info {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .product-type {
            display: inline-block;
            background: rgba(37, 99, 235, 0.15);
            color: var(--primary);
            padding: 6px 16px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
            align-self: flex-start;
            transition: var(--transition);
            box-shadow: var(--glow-primary);
        }
        .product-type:hover {
            transform: scale(1.03);
            box-shadow: var(--glow-primary), 0 5px 15px rgba(37, 99, 235, 0.15);
        }
        .product-name {
            display: flex;
            align-items: center;
            gap: 12px;
            font-family: 'Space Grotesk', sans-serif;
            font-size: 2.5rem;
            font-weight: 700;
            line-height: 1.1;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .product-subtitle {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1.2rem;
            color: #475569;
            margin-top: 5px;
        }
        .product-stats {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: var(--card-shadow), var(--glow-primary);
            transition: var(--transition);
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
            animation: floatUp 0.6s ease-out;
        }
        @keyframes floatUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .stat-card {
            display: flex;
            flex-direction: column;
            gap: 8px;
            padding: 15px;
            border-radius: 16px;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            z-index: 1;
        }
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.5) 100%);
            z-index: -1;
            opacity: 0;
            transition: var(--transition);
        }
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--card-hover), var(--glow-primary);
        }
        .stat-card:hover::before {
            opacity: 1;
        }
        .stat-value {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--primary);
            position: relative;
            display: inline-block;
        }
        .stat-value::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--primary);
            transition: var(--transition);
        }
        .stat-card:hover .stat-value::after {
            width: 100%;
        }
        .stat-label {
            font-size: 0.95rem;
            color: #64748b;
            font-weight: 500;
        }
        .content-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        .main-content {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 25px;
        }
        .section-card {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
            margin-bottom: 25px;
            position: relative;
            overflow: hidden;
            z-index: 1;
            transform: translateZ(0);
            will-change: transform, box-shadow;
        }
        .section-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            z-index: 2;
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .section-card:hover {
            transform: translateY(-3px);
            box-shadow: var(--card-hover), var(--glow-primary);
        }
        .section-card:hover::before {
            transform: scaleX(1);
        }
        .section-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--gray);
        }
        .section-icon {
            width: 45px;
            height: 45px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            transition: var(--transition);
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }
        .section-icon:hover {
            transform: scale(1.1) rotate(5deg);
        }
        .properties-header .section-icon {
            background: rgba(37, 99, 235, 0.1);
            color: var(--primary);
        }
        .hazard-header .section-icon {
            background: rgba(239, 68, 68, 0.1);
            color: var(--danger);
        }
        .health-header .section-icon {
            background: rgba(245, 158, 11, 0.1);
            color: var(--warning);
        }
        .industry-header .section-icon {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success);
        }
        .license-header .section-icon {
            background: rgba(139, 92, 246, 0.1);
            color: var(--secondary);
        }
        .section-title {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.5rem;
            font-weight: 600;
            position: relative;
            display: inline-block;
        }
        .section-title::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--primary);
            transition: var(--transition);
        }
        .section-card:hover .section-title::after {
            width: 70%;
        }
        .property-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        .property-item {
            display: flex;
            flex-direction: column;
            gap: 5px;
            position: relative;
            padding-left: 10px;
            transition: var(--transition);
        }
        .property-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: var(--gray);
            opacity: 0.5;
        }
        .property-item:hover {
            padding-left: 15px;
        }
        .property-item:hover::before {
            background: var(--primary);
            opacity: 1;
            transform: translateY(-50%) scale(1.2);
        }
        .property-label {
            font-size: 0.9rem;
            color: #64748b;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .property-label i {
            opacity: 0.5;
            font-size: 0.8rem;
        }
        .property-value {
            font-weight: 600;
            color: var(--dark);
            font-size: 1.05rem;
            position: relative;
            display: inline-block;
        }
        .property-value::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 1px;
            background: var(--primary);
            transition: var(--transition);
        }
        .property-item:hover .property-value::after {
            width: 100%;
        }
        .hazard-section, .health-section {
            padding: 20px;
            border-radius: 16px;
            position: relative;
            overflow: hidden;
        }
        .hazard-section::before, .health-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            opacity: 0.7;
        }
        .hazard-section {
            background: rgba(254, 226, 226, 0.4);
            border: 1px solid #fecaca;
        }
        .hazard-section::before {
            background: linear-gradient(to bottom, #ef4444, #dc2626);
        }
        .hazard-title {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #b91c1c;
            margin-bottom: 12px;
            font-weight: 600;
            font-size: 1.1rem;
        }
        .hazard-value {
            color: #991b1b;
            line-height: 1.6;
        }
        .health-section {
            background: rgba(254, 249, 196, 0.4);
            border: 1px solid #fde68a;
        }
        .health-section::before {
            background: linear-gradient(to bottom, #f59e0b, #d97706);
        }
        .health-title {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #a16207;
            margin-bottom: 12px;
            font-weight: 600;
            font-size: 1.1rem;
        }
        .health-value {
            color: #854d0e;
            line-height: 1.6;
        }
        .industry-section {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .industry-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        .industry-tag {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success);
            padding: 6px 14px;
            border-radius: 12px;
            font-size: 0.85rem;
            font-weight: 500;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            z-index: 1;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .industry-tag::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.2), transparent);
            transform: translateX(-100%);
            z-index: -1;
        }
        .industry-tag:hover {
            transform: translateY(-2px) scale(1.05);
            background: var(--success);
            color: white;
            box-shadow: 0 5px 15px rgba(16, 185, 129, 0.3);
        }
        .industry-tag:hover::after {
            animation: shine 1s;
        }
        @keyframes shine {
            to { transform: translateX(100%); }
        }
        .feedstock-section {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
            margin-bottom: 25px;
            position: relative;
            overflow: hidden;
        }
        .feedstock-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--secondary), var(--primary));
        }
        .feedstock-section:hover {
            transform: translateY(-3px);
            box-shadow: var(--card-hover), var(--glow-secondary);
        }
        .feedstock-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--gray);
        }
        .feedstock-header .section-icon {
            background: rgba(139, 92, 246, 0.1);
            color: var(--secondary);
        }
        .feedstock-title {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.5rem;
            font-weight: 600;
        }
        .raw-materials {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-top: 10px;
        }
        .material-tag {
            background: rgba(139, 92, 246, 0.1);
            color: var(--secondary);
            padding: 6px 14px;
            border-radius: 12px;
            font-size: 0.85rem;
            font-weight: 500;
            transition: var(--transition);
            cursor: pointer;
            position: relative;
            overflow: hidden;
            z-index: 1;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .material-tag::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.2);
            transform: translateX(-100%);
            transition: transform 0.3s ease;
            pointer-events: none;
        }
        .material-tag:hover {
            transform: scale(1.05);
            background: var(--secondary);
            color: white;
            box-shadow: 0 5px 15px rgba(139, 92, 246, 0.3);
        }
        .material-tag:hover::after {
            transform: translateX(0);
        }
        .market-insights {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
            margin-bottom: 25px;
            position: relative;
            overflow: hidden;
        }
        .market-insights::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
        }
        .market-insights:hover {
            transform: translateY(-3px);
            box-shadow: var(--card-hover), var(--glow-primary);
        }
        .market-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--gray);
        }
        .market-header .section-icon {
            background: rgba(37, 99, 235, 0.1);
            color: var(--primary);
        }
        .market-title {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.5rem;
            font-weight: 600;
        }
        .market-description {
            color: #475569;
            line-height: 1.7;
            margin-bottom: 20px;
        }
        .demand-chart-container {
            height: 280px;
            border-radius: 16px;
            overflow: hidden;
            margin: 15px 0;
            position: relative;
            background: #f8fafc;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
        }
        .demand-chart-container:hover {
            box-shadow: var(--card-hover), var(--glow-primary);
            transform: scale(1.01);
        }
        .region-demand {
            margin-top: 25px;
        }
        .region-item {
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            transition: var(--transition);
            background: white;
            box-shadow: var(--card-shadow);
            border-left: 4px solid;
            position: relative;
            overflow: hidden;
            z-index: 1;
        }
        .region-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 3px;
            height: 100%;
            opacity: 0;
            transition: var(--transition);
        }
        .region-item:hover {
            transform: translateY(-2px);
            box-shadow: var(--card-hover);
            z-index: 2;
        }
        .region-item:hover::before {
            opacity: 1;
        }
        .region-item:nth-child(1) {
            border-left-color: #2563eb;
        }
        .region-item:nth-child(1)::before {
            background: linear-gradient(to bottom, #2563eb, #3b82f6);
        }
        .region-item:nth-child(2) {
            border-left-color: #8b5cf6;
        }
        .region-item:nth-child(2)::before {
            background: linear-gradient(to bottom, #8b5cf6, #a78bfa);
        }
        .region-item:nth-child(3) {
            border-left-color: #10b981;
        }
        .region-item:nth-child(3)::before {
            background: linear-gradient(to bottom, #10b981, #34d399);
        }
        .region-item:nth-child(4) {
            border-left-color: #f59e0b;
        }
        .region-item:nth-child(4)::before {
            background: linear-gradient(to bottom, #f59e0b, #fbbf24);
        }
        .region-title {
            display: flex;
            justify-content: space-between;
            font-weight: 600;
            margin-bottom: 5px;
            color: var(--dark);
        }
        .region-percentage {
            font-weight: 700;
            font-size: 1.1rem;
            position: relative;
            display: inline-block;
        }
        .region-percentage::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 1px;
            background: currentColor;
            transition: var(--transition);
        }
        .region-item:hover .region-percentage::after {
            width: 100%;
        }
        .region-description {
            color: #64748b;
            font-size: 0.85rem;
            line-height: 1.4;
        }
        .region-progress {
            height: 6px;
            background: #e2e8f0;
            border-radius: 3px;
            margin-top: 5px;
            overflow: hidden;
            position: relative;
        }
        .region-progress::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.5), transparent);
            transform: translateX(-100%);
            animation: shimmer 1.5s infinite;
        }
        @keyframes shimmer {
            100% { transform: translateX(100%); }
        }
        .region-progress-bar {
            height: 100%;
            border-radius: 3px;
            transition: width 1.5s ease;
            position: relative;
        }
        .key-companies {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
            margin-bottom: 25px;
            position: relative;
            overflow: hidden;
        }
        .key-commodity {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
            margin-bottom: 25px;
            position: relative;
            overflow: hidden;
        }
        .key-commodity:hover, .key-companies:hover {
            transform: translateY(-3px);
            box-shadow: var(--card-hover), var(--glow-primary);
        }
        .companies-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--gray);
        }
        .companies-header .section-icon {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success);
        }
        .companies-title {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.5rem;
            font-weight: 600;
        }
        .company-list {
            list-style: none;
        }
        .company-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 15px 0;
            border-bottom: 1px solid var(--gray);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }
        .company-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 3px;
            height: 100%;
            background: var(--success);
            transform: scaleX(0);
            transform-origin: left;
            transition: var(--transition);
            z-index: 1;
        }
        .company-item:hover::before {
            transform: scaleX(1);
        }
        .company-item:last-child {
            border-bottom: none;
        }
        .company-item:hover {
            transform: translateX(5px);
            background: rgba(16, 185, 129, 0.05);
        }
        .company-flag {
            width: 28px;
            height: 20px;
            border-radius: 3px;
            background: #f1f5f9;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.7rem;
            color: #64748b;
            transition: var(--transition);
        }
        .company-item:hover .company-flag {
            transform: scale(1.1);
            box-shadow: 0 0 0 2px var(--success);
        }
        .company-name {
            font-weight: 600;
            color: var(--dark);
            position: relative;
            display: inline-block;
        }
        .company-name::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 1px;
            background: var(--success);
            transition: var(--transition);
        }
        .company-item:hover .company-name::after {
            width: 100%;
        }
        .company-country {
            color: #64748b;
            font-size: 0.9rem;
        }
        .molecular-visualization {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
            text-align: center;
            margin-bottom: 25px;
            position: relative;
            overflow: hidden;
        }
        .molecular-visualization::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--danger), #f87171);
        }
        .molecular-visualization:hover {
            transform: translateY(-3px);
            box-shadow: var(--card-hover), var(--glow-primary);
        }
        .molecular-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--gray);
        }
        .molecular-header .section-icon {
            background: rgba(239, 68, 68, 0.1);
            color: var(--danger);
        }
        .molecular-title {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.5rem;
            font-weight: 600;
        }
        .molecular-diagram {
            width: 100%;
            height: 300px;
            border-radius: 16px;
            margin: 15px 0;
            position: relative;
            overflow: hidden;
            box-shadow: var(--card-shadow);
        }
        .molecular-diagram:hover {
            box-shadow: var(--card-hover);
        }
        #molecular-canvas {
            width: 100%;
            height: 100%;
        }
        .molecular-info {
            display: flex;
            justify-content: space-around;
            background: #f8fafc;
            border-radius: 12px;
            padding: 15px;
            font-size: 0.9rem;
        }
        .molecular-label {
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .color-swatch {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }
        .molecular-red {
            background-color: #ef4444;
        }
        .molecular-blue {
            background-color: #1e40af;
        }
        .molecular-gray {
            background-color: #64748b;
        }
        .safety-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: #fee2e2;
            color: #b91c1c;
            padding: 8px 16px;
            border-radius: 12px;
            font-weight: 500;
            margin-top: 15px;
            align-self: flex-start;
            animation: pulseDanger 2s infinite;
        }
        @keyframes pulseDanger {
            0% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.2); }
            70% { box-shadow: 0 0 0 10px rgba(239, 68, 68, 0); }
            100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); }
        }
        footer {
            text-align: center;
            margin-top: 40px;
            color: #64748b;
            font-size: 0.9rem;
            padding: 20px;
        }
        .footer-note {
            margin-top: 10px;
            font-size: 0.85rem;
            color: #94a3b8;
            font-style: italic;
        }
        /* Production Process Specific Styles */
        .process-stages {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 15px;
        }
        .stage {
            background: #f8fafc;
            border-radius: 12px;
            padding: 12px;
            border-left: 3px solid var(--primary);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }
        .stage::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transform: translateX(-100%);
        }
        .stage:hover {
            background: #edf2ff;
            transform: translateX(5px);
        }
        .stage:hover::before {
            animation: shine 1.5s;
        }
        @keyframes shine {
            to { transform: translateX(100%); }
        }
        .stage-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            font-weight: bold;
            margin-right: 8px;
            font-size: 0.85rem;
            transition: var(--transition);
        }
        .stage:hover .stage-number {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.3);
        }
        .stage-title {
            font-weight: 600;
            color: var(--dark);
            display: flex;
            align-items: center;
            margin-bottom: 5px;
            font-size: 1.05rem;
            position: relative;
            display: inline-block;
        }
        .stage-title::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 1px;
            background: var(--primary);
            transition: var(--transition);
        }
        .stage:hover .stage-title::after {
            width: 100%;
        }
        .stage-description {
            color: #475569;
            line-height: 1.5;
            font-size: 0.9rem;
        }
        .process-diagram {
            background: #f8fafc;
            border-radius: 16px;
            padding: 15px;
            margin-top: 15px;
            height: 350px;
            position: relative;
            overflow: hidden;
        }
        .diagram-title {
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1.05rem;
        }
        .plant-capacity {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-top: 12px;
        }
        .capacity-card {
            background: #f8fafc;
            border-radius: 12px;
            padding: 12px;
            border-left: 3px solid var(--success);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }
        .capacity-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.3), transparent);
            transform: translateX(-100%);
        }
        .capacity-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            background: #edf7f4;
        }
        .capacity-card:hover::before {
            animation: shine 1.5s;
        }
        .capacity-title {
            font-weight: 600;
            color: var(--success);
            display: flex;
            align-items: center;
            gap: 6px;
            margin-bottom: 8px;
            font-size: 0.95rem;
        }
        .capacity-value {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--dark);
        }
        .capacity-location {
            color: #64748b;
            font-size: 0.85rem;
            margin-top: 4px;
        }
        .capacity-note {
            font-size: 0.8rem;
            color: #64748b;
            margin-top: 12px;
            line-height: 1.4;
        }
        .process-selector {
            display: flex;
            gap: 8px;
            margin-bottom: 12px;
            border-bottom: 1px solid var(--gray);
            padding-bottom: 8px;
        }
        .process-btn {
            padding: 5px 12px;
            border-radius: 18px;
            background: #e2e8f0;
            border: none;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.9rem;
            position: relative;
            overflow: hidden;
        }
        .process-btn::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.3), transparent);
            transform: translateX(-100%);
        }
        .process-btn:hover::after {
            animation: shine 1s;
        }
        .process-btn.active {
            background: var(--primary);
            color: white;
        }
        .process-info {
            background: #f0f4ff;
            border-radius: 12px;
            padding: 12px;
            margin-bottom: 15px;
            font-size: 0.92rem;
            line-height: 1.5;
            border-left: 3px solid var(--primary);
        }
        .process-highlight {
            font-weight: 600;
            color: var(--primary);
        }
        /* Applications Section */
        .applications-section {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
            margin-bottom: 25px;
            position: relative;
            overflow: hidden;
        }
        .applications-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--success), #22c55e);
        }
        .applications-section:hover {
            transform: translateY(-3px);
            box-shadow: var(--card-hover), var(--glow-primary);
        }
        .applications-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--gray);
        }
        .applications-header .section-icon {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success);
        }
        .applications-title {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.5rem;
            font-weight: 600;
        }
        .application-chart {
            height: 250px;
            margin-top: 15px;
            position: relative;
        }
        .application-chart::after {
            content: '3D Interactive';
            position: absolute;
            top: 10px;
            right: 15px;
            background: rgba(0,0,0,0.1);
            color: white;
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 0.7rem;
            font-weight: 500;
            backdrop-filter: blur(2px);
        }
        .chart-legend {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
            justify-content: center;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.85rem;
            padding: 3px 8px;
            border-radius: 6px;
            transition: var(--transition);
        }
        .legend-item:hover {
            background: #f1f5f9;
            transform: translateY(-1px);
        }
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 3px;
        }
        .design-credit {
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: var(--card-shadow);
            margin-top: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        .design-credit::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
        }
        .credit-header {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }
        .credit-icon {
            background: var(--primary);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            transition: var(--transition);
            box-shadow: 0 5px 15px rgba(37, 99, 235, 0.3);
        }
        .credit-icon:hover {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 8px 20px rgba(37, 99, 235, 0.4);
        }
        .credit-title {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.4rem;
            font-weight: 600;
            color: var(--primary);
        }
        .credit-details {
            color: #475569;
            line-height: 1.6;
            max-width: 600px;
            margin: 0 auto;
        }
        .contact-info {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
        }
        .contact-item {
            display: flex;
            align-items: center;
            gap: 5px;
            background: #f8fafc;
            padding: 8px 15px;
            border-radius: 10px;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            z-index: 1;
        }
        .contact-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.3), transparent);
            transform: translateX(-100%);
        }
        .contact-item:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(37, 99, 235, 0.3);
        }
        .contact-item:hover::before {
            animation: shine 1s;
        }
        .contact-item:hover i {
            color: white;
        }
        /* License Providers Section */
        .license-providers {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .provider-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: #f8fafc;
            border-radius: 12px;
            transition: var(--transition);
            border-left: 3px solid var(--secondary);
            position: relative;
            overflow: hidden;
        }
        .provider-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.3), transparent);
            transform: translateX(-100%);
        }
        .provider-item:hover {
            transform: translateX(5px);
            background: #f1f5f9;
        }
        .provider-item:hover::before {
            animation: shine 1.5s;
        }
        .provider-rank {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 28px;
            height: 28px;
            background: var(--secondary);
            color: white;
            border-radius: 50%;
            font-weight: bold;
            font-size: 0.9rem;
            transition: var(--transition);
            box-shadow: 0 2px 4px rgba(139, 92, 246, 0.2);
        }
        .provider-item:hover .provider-rank {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 5px 15px rgba(139, 92, 246, 0.3);
        }
        .provider-info {
            flex: 1;
        }
        .provider-name {
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 4px;
            position: relative;
            display: inline-block;
        }
        .provider-name::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 1px;
            background: var(--secondary);
            transition: var(--transition);
        }
        .provider-item:hover .provider-name::after {
            width: 100%;
        }
        .provider-details {
            color: #64748b;
            font-size: 0.9rem;
        }
        .provider-licenses {
            background: rgba(139, 92, 246, 0.1);
            color: var(--secondary);
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 500;
            align-self: flex-start;
            transition: var(--transition);
        }
        .provider-item:hover .provider-licenses {
            background: var(--secondary);
            color: white;
        }
        /* 3D Chart Container */
        .chart3d-container {
            position: relative;
            width: 100%;
            height: 100%;
        }
        .chart3d-tooltip {
            position: absolute;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.85rem;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s;
            z-index: 100;
            transform: translate(-50%, -100%);
        }
        .chart3d-tooltip::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 5px solid transparent;
            border-right: 5px solid transparent;
            border-top: 5px solid rgba(0,0,0,0.8);
        }
        @media (max-width: 1100px) {
            .content-grid {
                grid-template-columns: 1fr;
            }
            .main-content {
                grid-template-columns: 1fr;
            }
            .product-stats {
                grid-template-columns: 1fr 1fr;
            }
        }
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }
            .product-header {
                flex-direction: column;
            }
            .product-name {
                font-size: 2rem;
                text-align: center;
            }
            .product-stats {
                grid-template-columns: 1fr;
            }
            .property-grid {
                grid-template-columns: 1fr;
            }
            .plant-capacity {
                grid-template-columns: 1fr;
            }
        }
    

/* =========================
   Language fonts & direction
   ========================= */
html[lang="en"] body{
    font-family: 'Inter','Space Grotesk', sans-serif;
}
html[lang="fa"] body{
    font-family: 'Vazirmatn','Inter', sans-serif;
}
/* Better RTL/LTR support using logical properties where possible */
.property-item{ padding-inline-start: 10px; padding-left: 0; }
.property-item:hover{ padding-inline-start: 15px; }
.property-item::before{ inset-inline-start: 0; left: auto; }
.region-item{ border-inline-start: 4px solid; border-left: 0; }
.region-item::before{ inset-inline-start: 0; left:auto; }
.stage{ border-inline-start: 3px solid var(--primary); border-left: 0; }
.capacity-card{ border-inline-start: 3px solid var(--success); border-left: 0; }
.provider-item{ border-inline-start: 3px solid var(--secondary); border-left: 0; }
.hazard-section::before, .health-section::before{ inset-inline-start: 0; left:auto; }

/* =========================
   Theme system (Light/Dark)
   ========================= */
html{
    /* surfaces */
    --surface: #ffffff;
    --surface-2: #f8fafc;
    --surface-3: rgba(255,255,255,0.70);
    --text-1: #0f172a;
    --text-2: #475569;
    --text-3: #64748b;
    --border: rgba(15,23,42,0.10);
    --molecule-bg: #f8fafc;
    color-scheme: light;
}
body{
    background: linear-gradient(135deg, #f0fdfa 0%, #eff6ff 100%);
    color: var(--text-1);
}
html[data-theme="dark"]{
    /* High-contrast dark palette (readable on true-black displays) */
    --surface: rgba(12,18,34,0.88);
    --surface-2: rgba(17,26,46,0.78);
    --surface-3: rgba(12,18,34,0.62);

    /* Text */
    --text-1: #eef2ff;   /* main text */
    --text-2: #d6def7;   /* body/secondary text */
    --text-3: #a7b4d8;   /* muted text */

    /* Critical: many parts of the page use var(--dark) for text */
    --dark: #eef2ff;
    --light: #0b1020;

    /* Borders / shadows */
    --border: rgba(167,180,216,0.18);
    --gray: rgba(167,180,216,0.18);
    --card-shadow: 0 10px 18px -4px rgba(0, 0, 0, 0.55), 0 4px 10px -6px rgba(0, 0, 0, 0.45);
    --card-hover: 0 22px 30px -10px rgba(0, 0, 0, 0.65), 0 10px 16px -10px rgba(0, 0, 0, 0.50);

    /* 3D canvas background */
    --molecule-bg: #0b1020;

    color-scheme: dark;
}
html[data-theme="dark"] body{
    background: radial-gradient(1200px 800px at 10% 10%, rgba(13,148,136,0.20), transparent 55%),
                radial-gradient(1000px 700px at 90% 15%, rgba(37,99,235,0.18), transparent 55%),
                radial-gradient(1000px 700px at 50% 110%, rgba(139,92,246,0.14), transparent 55%),
                linear-gradient(180deg, #020617 0%, #0b1220 100%);
    color: var(--text-1);
}
/* Card surfaces */
html[data-theme="dark"] .product-stats,
html[data-theme="dark"] .section-card,
html[data-theme="dark"] .feedstock-section,
html[data-theme="dark"] .market-insights,
html[data-theme="dark"] .key-companies,
html[data-theme="dark"] .key-commodity,
html[data-theme="dark"] .molecular-visualization,
html[data-theme="dark"] .applications-section,
html[data-theme="dark"] .design-credit{
    background: var(--surface);
    border: 1px solid var(--border);
    box-shadow: var(--card-shadow);
}
html[data-theme="dark"] .demand-chart-container,
html[data-theme="dark"] .process-diagram,
html[data-theme="dark"] .molecular-info,
html[data-theme="dark"] .stage,
html[data-theme="dark"] .capacity-card,
html[data-theme="dark"] .provider-item,
html[data-theme="dark"] .contact-item,
html[data-theme="dark"] .region-item{
    background: var(--surface-2);
    border-color: var(--border);
}
html[data-theme="dark"] .section-header,
html[data-theme="dark"] .feedstock-header,
html[data-theme="dark"] .market-header,
html[data-theme="dark"] .companies-header,
html[data-theme="dark"] .molecular-header,
html[data-theme="dark"] .applications-header{
    border-bottom: 1px solid var(--border);
}
/* Text colors */
html[data-theme="dark"] .product-subtitle,
html[data-theme="dark"] .market-description,
html[data-theme="dark"] .region-description,
html[data-theme="dark"] .company-country,
html[data-theme="dark"] .capacity-location,
html[data-theme="dark"] .capacity-note,
html[data-theme="dark"] .property-label,
html[data-theme="dark"] .stat-label,
html[data-theme="dark"] footer,
html[data-theme="dark"] .footer-note{
    color: var(--text-2) !important;
}
html[data-theme="dark"] .property-value,
html[data-theme="dark"] .region-title,
html[data-theme="dark"] .company-name,
html[data-theme="dark"] .stage-title,
html[data-theme="dark"] .capacity-value,
html[data-theme="dark"] .provider-name{
    color: var(--text-1) !important;
}
html[data-theme="dark"] .region-progress{ background: rgba(148,163,184,0.18); }
html[data-theme="dark"] .region-item:hover{ background: rgba(148,163,184,0.08); }
html[data-theme="dark"] .company-item:hover{ background: rgba(16,185,129,0.08); }

/* Hazard blocks in dark */
html[data-theme="dark"] .hazard-section{
    background: rgba(127,29,29,0.25);
    border-color: rgba(239,68,68,0.35);
}
html[data-theme="dark"] .health-section{
    background: rgba(120,53,15,0.25);
    border-color: rgba(245,158,11,0.35);
}
html[data-theme="dark"] .safety-badge{
    background: rgba(239,68,68,0.18);
    color: #fecaca;
}

/* Toggle button polish */
.hdr-btn.theme i{ transition: transform .25s ease; }
.hdr-btn.theme:hover i{ transform: rotate(-10deg) scale(1.05); }

/* Responsive fix: product-header is grid (not flex) */
@media (max-width: 768px){
    .product-header{ grid-template-columns: 1fr; }
    .safety-badge{ justify-self: start; }
}

/* Reduce motion */
@media (prefers-reduced-motion: reduce){
    *{ animation-duration: 0.001ms !important; animation-iteration-count: 1 !important; transition-duration: 0.001ms !important; scroll-behavior: auto !important; }
}


/* =========================
   Dark-mode readability overrides (inline styles + hard-coded colors)
   ========================= */
html[data-theme="dark"]{
    /* Make sure plain text defaults are readable */
    color: var(--text-1);
}

html[data-theme="dark"] body{
    color: var(--text-1);
}

/* Override common hard-coded text colors used in inline styles */
html[data-theme="dark"] [style*="color: #475569"],
html[data-theme="dark"] [style*="color:#475569"]{ color: var(--text-2) !important; }

html[data-theme="dark"] [style*="color: #64748b"],
html[data-theme="dark"] [style*="color:#64748b"]{ color: var(--text-3) !important; }

html[data-theme="dark"] [style*="color: #0f172a"],
html[data-theme="dark"] [style*="color:#0f172a"],
html[data-theme="dark"] [style*="color: var(--dark)"],
html[data-theme="dark"] [style*="color:var(--dark)"]{ color: var(--text-1) !important; }

/* Fix common light backgrounds used inline inside CAPEX cards */
html[data-theme="dark"] [style*="background: #f8fafc"],
html[data-theme="dark"] [style*="background:#f8fafc"]{
    background: var(--surface-2) !important;
    border-color: var(--border) !important;
}
html[data-theme="dark"] [style*="background: #fff7ed"],
html[data-theme="dark"] [style*="background:#fff7ed"],
html[data-theme="dark"] [style*="background: #fff7ed;"],
html[data-theme="dark"] [style*="background:#fff7ed;"]{
    background: rgba(249,115,22,0.12) !important;
    border-color: rgba(249,115,22,0.28) !important;
}

/* Ensure link/text inside contact pills stays readable */
html[data-theme="dark"] a{ color: var(--text-1); }
html[data-theme="dark"] a:hover{ color: var(--text-1); }

/* Keep small helper texts readable */
html[data-theme="dark"] .credit-details,
html[data-theme="dark"] .capacity-note,
html[data-theme="dark"] .stage-description{ color: var(--text-2) !important; }



/* === Fix: process-info box readability in Dark theme === */
html[data-theme="dark"] .process-info{
    background: rgba(37, 99, 235, 0.12) !important; /* soft indigo */
    border: 1px solid rgba(167,180,216,0.22) !important;
    color: var(--text-2) !important;
}
html[data-theme="dark"] .process-info .process-highlight{
    color: #93c5fd !important; /* readable accent */
}
html[data-theme="dark"] .process-info i{
    color: #93c5fd !important;
}

</style>

</head>

<body>
  <div class="container">
    <header>
      <div class="header-content">
        <div class="logo">
          <i class="fas fa-flask"></i>
          <h1><span data-i18n-en="Chemical Farm" data-i18n-fa="Chemical Farm">Chemical Farm</span></h1>
        </div>
        <div class="header-actions">
          <a class="hdr-btn home" href="index.html" title="Home">
            <i class="fas fa-home"></i>
            <span data-i18n-en="Home" data-i18n-fa="خانه">Home</span>
          </a>
          <button class="hdr-btn theme" id="themeToggle" title="Theme" type="button" aria-label="Toggle theme">
            <i class="fas fa-moon"></i>
            <span data-i18n-en="Theme" data-i18n-fa="تم">Theme</span>
          </button>
          <button class="hdr-btn lang" id="langToggle" title="Language" type="button">
            <i class="fas fa-language"></i>
            <span id="langLabel">EN</span>
          </button>
        </div>
      </div>
    </header>

    <div class="product-header">
      <div class="product-info">
        <div class="product-type">
          <span data-i18n-en="Polyolefin Copolymer" data-i18n-fa="کوپلیمر پلی‌اولفینی">Polyolefin Copolymer</span>
        </div>
        <h1 class="product-name">
          <i class="fas fa-flask"></i>
          <span data-i18n-en="EVA (Ethylene–Vinyl Acetate)" data-i18n-fa="EVA (اتیلن-وینیل استات)">EVA (Ethylene–Vinyl Acetate)</span>
        </h1>
        <div class="product-subtitle">
          <i class="fas fa-microscope"></i>
          <span data-i18n-en="(C2H4·C4H6O2)n | Common CAS 24937-78-8" data-i18n-fa="(C2H4·C4H6O2)n | کَس رایج 24937-78-8">(C2H4·C4H6O2)n | Common CAS 24937-78-8</span>
        </div>
      </div>

      <div class="safety-badge">
        <i class="fas fa-exclamation-triangle"></i>
        <span
          data-i18n-en="Combustible polymer | Processing fumes at high temperature"
          data-i18n-fa="پلیمر قابل‌احتراق | بخارات فرآیندی در دماهای بالا"
        >Combustible polymer | Processing fumes at high temperature</span>
      </div>
    </div>

    <div class="product-stats">
      <div class="stat-card">
        <div class="stat-value"><span data-i18n-en="≈3.5M+ (2024 est.)" data-i18n-fa="حدود ۳.۵+ میلیون (برآورد ۲۰۲۴)">≈3.5M+ (2024 est.)</span></div>
        <div class="stat-label"><span data-i18n-en="Estimated Global Demand (Tons/Y)" data-i18n-fa="برآورد تقاضای جهانی (تن/سال)">Estimated Global Demand (Tons/Y)</span></div>
      </div>

      <div class="stat-card">
        <div class="stat-value"><span data-i18n-en="Grade/region dependent" data-i18n-fa="وابسته به گرید/منطقه">Grade/region dependent</span></div>
        <div class="stat-label"><span data-i18n-en="Market Value (varies by grade)" data-i18n-fa="ارزش بازار (وابسته به گرید)">Market Value (varies by grade)</span></div>
      </div>

      <div class="stat-card">
        <div class="stat-value"><span data-i18n-en="Pellets • Films • PV Encapsulant" data-i18n-fa="گرانول • فیلم • انکپسولنت خورشیدی">Pellets • Films • PV Encapsulant</span></div>
        <div class="stat-label"><span data-i18n-en="Common Forms" data-i18n-fa="شکل‌های رایج">Common Forms</span></div>
      </div>
    </div>

    <div class="content-grid">
      <div class="main-content">

        <!-- Chemical Properties -->
        <div class="section-card">
          <div class="section-header properties-header">
            <div class="section-icon"><i class="fas fa-vial"></i></div>
            <h2 class="section-title"><span data-i18n-en="Chemical Properties" data-i18n-fa="خواص شیمیایی">Chemical Properties</span></h2>
          </div>

          <div class="property-grid">
            <div class="property-item">
              <div class="property-label">
                <i class="fas fa-weight-hanging"></i>
                <span data-i18n-en="Molecular Weight" data-i18n-fa="جرم مولکولی">Molecular Weight</span>
              </div>
              <div class="property-value"><span data-i18n-en="Varies (copolymer)" data-i18n-fa="متغیر (کوپلیمر)">Varies (copolymer)</span></div>
            </div>

            <div class="property-item">
              <div class="property-label">
                <i class="fas fa-percentage"></i>
                <span data-i18n-en="Vinyl Acetate (VA) Content" data-i18n-fa="درصد وینیل‌استات (VA)">Vinyl Acetate (VA) Content</span>
              </div>
              <div class="property-value"><span data-i18n-en="Grade-dependent (typically up to ~40 wt%)" data-i18n-fa="وابسته به گرید (معمولاً تا حدود ۴۰٪ وزنی)">Grade-dependent (typically up to ~40 wt%)</span></div>
            </div>

            <div class="property-item">
              <div class="property-label">
                <i class="fas fa-ruler-combined"></i>
                <span data-i18n-en="Density" data-i18n-fa="چگالی">Density</span>
              </div>
              <div class="property-value"><span data-i18n-en="~0.93–0.96 g/cm³ (grade-dependent)" data-i18n-fa="حدود ۰.۹۳ تا ۰.۹۶ گرم/سانتی‌متر³ (وابسته به گرید)">~0.93–0.96 g/cm³ (grade-dependent)</span></div>
            </div>

            <div class="property-item">
              <div class="property-label">
                <i class="fas fa-temperature-high"></i>
                <span data-i18n-en="Melting / Softening Range" data-i18n-fa="بازه ذوب/نرم‌شدن">Melting / Softening Range</span>
              </div>
              <div class="property-value"><span data-i18n-en="~60–100°C (grade-dependent)" data-i18n-fa="حدود ۶۰ تا ۱۰۰°C (وابسته به گرید)">~60–100°C (grade-dependent)</span></div>
            </div>

            <div class="property-item">
              <div class="property-label">
                <i class="fas fa-tint"></i>
                <span data-i18n-en="Water Solubility" data-i18n-fa="حلالیت در آب">Water Solubility</span>
              </div>
              <div class="property-value"><span data-i18n-en="Insoluble" data-i18n-fa="نامحلول">Insoluble</span></div>
            </div>

            <div class="property-item">
              <div class="property-label">
                <i class="fas fa-fire"></i>
                <span data-i18n-en="Flash Point" data-i18n-fa="نقطه اشتعال">Flash Point</span>
              </div>
              <div class="property-value"><span data-i18n-en="Not applicable (solid polymer); combustible" data-i18n-fa="قابل‌اعمال نیست (پلیمر جامد)؛ قابل‌احتراق">Not applicable (solid polymer); combustible</span></div>
            </div>
          </div>
        </div>

        <!-- Hazard + Chronic -->
        <div class="section-card">
          <div class="section-header hazard-header">
            <div class="section-icon"><i class="fas fa-exclamation-triangle"></i></div>
            <h2 class="section-title"><span data-i18n-en="Hazard Classification" data-i18n-fa="طبقه‌بندی خطر">Hazard Classification</span></h2>
          </div>

          <div class="hazard-section">
            <h3 class="hazard-title">
              <i class="fas fa-shield-alt"></i>
              <span
                data-i18n-en="Typically not classified as hazardous; treat as combustible solid and control dust/fumes"
                data-i18n-fa="معمولاً در GHS خطرناک طبقه‌بندی نمی‌شود؛ به‌عنوان جامد قابل‌احتراق مدیریت شده و گردوغبار/بخارات کنترل شود"
              >Typically not classified as hazardous; treat as combustible solid and control dust/fumes</span>
            </h3>
            <p class="hazard-value">
              <span
                data-i18n-en="EVA is generally regarded as a low-toxicity polymer in pellet/solid form. Main operational risks are fire load (combustible polymer), static/dust handling, and irritating fumes during overheating, cutting, or processing at elevated temperatures. Keep away from strong oxidizers; ensure ventilation during hot processing."
                data-i18n-fa="EVA معمولاً در حالت جامد/گرانول کم‌خطر تلقی می‌شود. ریسک‌های اصلی شامل بار آتش‌گیری (پلیمر قابل‌احتراق)، مدیریت گردوغبار/الکتریسیته ساکن و بخارات تحریک‌کننده هنگام داغ‌شدن بیش از حد، برش یا فرآیند در دماهای بالا است. از اکسیدکننده‌های قوی دور نگه دارید و در فرآیندهای داغ تهویه را رعایت کنید."
              >EVA is generally regarded as a low-toxicity polymer in pellet/solid form. Main operational risks are fire load (combustible polymer), static/dust handling, and irritating fumes during overheating, cutting, or processing at elevated temperatures. Keep away from strong oxidizers; ensure ventilation during hot processing.</span>
            </p>
          </div>

          <div class="section-header health-header" style="margin-top: 25px;">
            <div class="section-icon"><i class="fas fa-heartbeat"></i></div>
            <h2 class="section-title"><span data-i18n-en="Chronic Health Effects" data-i18n-fa="اثرات بلندمدت بر سلامت">Chronic Health Effects</span></h2>
          </div>

          <div class="health-section">
            <h3 class="health-title">
              <i class="fas fa-user-injured"></i>
              <span
                data-i18n-en="Low chronic hazard in solid form; fumes may irritate if overheated"
                data-i18n-fa="خطر مزمن پایین در حالت جامد؛ بخارات در داغ‌شدن بیش از حد می‌تواند تحریک‌کننده باشد"
              >Low chronic hazard in solid form; fumes may irritate if overheated</span>
            </h3>
            <p class="health-value">
              <span
                data-i18n-en="Routine handling of pellets typically presents minimal health risk with basic hygiene. During extrusion, film casting, lamination, or compounding, control fumes and avoid breathing thermal decomposition products. Use local exhaust ventilation and appropriate PPE as required by your SDS/site risk assessment."
                data-i18n-fa="در هندل معمول گرانول‌ها، با رعایت بهداشت پایه معمولاً ریسک سلامت پایین است. در اکستروژن، فیلم‌کستینگ، لمینیشن یا کامپاندینگ، بخارات را کنترل کرده و از استنشاق محصولات تجزیه حرارتی جلوگیری کنید. تهویه موضعی و PPE مناسب مطابق SDS/ارزیابی ریسک سایت استفاده شود."
              >Routine handling of pellets typically presents minimal health risk with basic hygiene. During extrusion, film casting, lamination, or compounding, control fumes and avoid breathing thermal decomposition products. Use local exhaust ventilation and appropriate PPE as required by your SDS/site risk assessment.</span>
            </p>
          </div>
        </div>

        <!-- 3D -->
        <div class="molecular-visualization">
          <div class="molecular-header">
            <div class="section-icon"><i class="fas fa-project-diagram"></i></div>
            <h2 class="molecular-title"><span data-i18n-en="3D Molecular Segment (Illustrative)" data-i18n-fa="قطعه مولکولی سه‌بعدی (شماتیک)">3D Molecular Segment (Illustrative)</span></h2>
          </div>
          <div class="molecular-diagram"><div id="molecular-canvas"></div></div>
          <div class="molecular-info">
            <div class="molecular-label"><span class="color-swatch molecular-red"></span><span data-i18n-en="Oxygen (O)" data-i18n-fa="اکسیژن (O)">Oxygen (O)</span></div>
            <div class="molecular-label"><span class="color-swatch molecular-blue"></span><span data-i18n-en="Carbon (C)" data-i18n-fa="کربن (C)">Carbon (C)</span></div>
            <div class="molecular-label"><span class="color-swatch molecular-gray"></span><span data-i18n-en="Hydrogen (H)" data-i18n-fa="هیدروژن (H)">Hydrogen (H)</span></div>
          </div>
          <div class="capacity-note">
            <span
              data-i18n-en="EVA is a copolymer of ethylene and vinyl acetate. This 3D view is a simplified copolymer segment to support visualization (not a full polymer chain)."
              data-i18n-fa="EVA کوپلیمر اتیلن و وینیل‌استات است. این نمایش سه‌بعدی یک قطعه ساده‌شده از کوپلیمر برای درک بصری است (نه زنجیره کامل پلیمر)."
            >EVA is a copolymer of ethylene and vinyl acetate. This 3D view is a simplified copolymer segment to support visualization (not a full polymer chain).</span>
          </div>
        </div>

        <!-- Production -->
        <div class="feedstock-section">
          <div class="feedstock-header">
            <div class="section-icon"><i class="fas fa-industry"></i></div>
            <h2 class="feedstock-title"><span data-i18n-en="Production Process &amp; Capacity" data-i18n-fa="فرآیند تولید و ظرفیت">Production Process &amp; Capacity</span></h2>
          </div>

          <div class="process-info">
            <i class="fas fa-info-circle" style="margin-inline-end: 6px; color: var(--primary);"></i>
            <span data-i18n-en="EVA is commonly produced via " data-i18n-fa="EVA معمولاً از مسیر ">EVA is commonly produced via </span>
            <span class="process-highlight"><span data-i18n-en="high-pressure free-radical copolymerization" data-i18n-fa="کوپلیمریزاسیون رادیکالی پرفشار">high-pressure free-radical copolymerization</span></span>
            <span data-i18n-en=" of ethylene with vinyl acetate, followed by separation/recycle, extrusion and pelletizing." data-i18n-fa=" اتیلن با وینیل‌استات تولید می‌شود و سپس جداسازی/ریکاوری، اکستروژن و پلت‌سازی انجام می‌گردد."> of ethylene with vinyl acetate, followed by separation/recycle, extrusion and pelletizing.</span>
          </div>

          <div class="process-selector">
            <button class="process-btn active" data-process="hp">
              <span data-i18n-en="High-Pressure Copolymerization" data-i18n-fa="کوپلیمریزاسیون پرفشار">High-Pressure Copolymerization</span>
            </button>
            <button class="process-btn" data-process="comp">
              <span data-i18n-en="Compounding / Film &amp; Sheet" data-i18n-fa="کامپاندینگ / فیلم و ورق">Compounding / Film &amp; Sheet</span>
            </button>
          </div>

          <div class="process-stages">
            <div class="stage">
              <div class="stage-title"><span class="stage-number">1</span>
                <span data-i18n-en="Feed Compression &amp; Conditioning" data-i18n-fa="تراکم و آماده‌سازی خوراک">Feed Compression &amp; Conditioning</span>
              </div>
              <div class="stage-description">
                <span
                  data-i18n-en="Ethylene is pre-compressed and brought to reaction pressure; vinyl acetate is metered as comonomer under controlled conditions."
                  data-i18n-fa="اتیلن پیش‌تراکم شده و به فشار واکنش می‌رسد؛ وینیل‌استات به‌عنوان کومونومر با کنترل دقیق تزریق/متر می‌شود."
                >Ethylene is pre-compressed and brought to reaction pressure; vinyl acetate is metered as comonomer under controlled conditions.</span>
              </div>
            </div>

            <div class="stage">
              <div class="stage-title"><span class="stage-number">2</span>
                <span data-i18n-en="High-Pressure Polymerization" data-i18n-fa="پلیمریزاسیون پرفشار">High-Pressure Polymerization</span>
              </div>
              <div class="stage-description">
                <span
                  data-i18n-en="Free-radical polymerization is initiated (typically organic peroxides). Reactor type may be tubular or autoclave depending on grade slate."
                  data-i18n-fa="پلیمریزاسیون رادیکالی با آغازگرها (معمولاً پراکسیدهای آلی) انجام می‌شود. نوع راکتور می‌تواند تیوبولار یا اتوکلاو باشد (وابسته به سبد گرید)."
                >Free-radical polymerization is initiated (typically organic peroxides). Reactor type may be tubular or autoclave depending on grade slate.</span>
              </div>
            </div>

            <div class="stage">
              <div class="stage-title"><span class="stage-number">3</span>
                <span data-i18n-en="Separation, Recycle &amp; Degassing" data-i18n-fa="جداسازی، بازیافت و دی‌گسینگ">Separation, Recycle &amp; Degassing</span>
              </div>
              <div class="stage-description">
                <span
                  data-i18n-en="Polymer/gas separation removes unreacted monomers which are recovered and recycled; pellets are degassed to control residuals."
                  data-i18n-fa="با جداسازی پلیمر/گاز، مونومرهای واکنش‌نداده بازیابی و ریسایکل می‌شوند؛ برای کنترل باقی‌مانده‌ها، دی‌گسینگ گرانول انجام می‌شود."
                >Polymer/gas separation removes unreacted monomers which are recovered and recycled; pellets are degassed to control residuals.</span>
              </div>
            </div>

            <div class="stage">
              <div class="stage-title"><span class="stage-number">4</span>
                <span data-i18n-en="Extrusion, Pelletizing &amp; Finishing" data-i18n-fa="اکستروژن، پلت‌سازی و تکمیل">Extrusion, Pelletizing &amp; Finishing</span>
              </div>
              <div class="stage-description">
                <span
                  data-i18n-en="Polymer is extruded and pelletized; additives (antioxidants, processing aids) may be incorporated depending on end-use requirements."
                  data-i18n-fa="پلیمر اکسترود و پلت‌سازی می‌شود؛ بسته به کاربرد، افزودنی‌ها (آنتی‌اکسیدان، کمک‌فرآیند) قابل تزریق/افزودن هستند."
                >Polymer is extruded and pelletized; additives (antioxidants, processing aids) may be incorporated depending on end-use requirements.</span>
              </div>
            </div>
          </div>

          <div class="plant-capacity">
            <div class="capacity-card">
              <div class="capacity-title"><i class="fas fa-industry"></i>
                <span data-i18n-en="Minimum Capacity" data-i18n-fa="حداقل ظرفیت">Minimum Capacity</span>
              </div>
              <div class="capacity-value"><span data-i18n-en="50K T/Y (indicative)" data-i18n-fa="۵۰ هزار تن/سال (تقریبی)">50K T/Y (indicative)</span></div>
              <div class="capacity-location"><span data-i18n-en="Specialty/region-scale EVA lines" data-i18n-fa="لاین‌های تخصصی/منطقه‌ای EVA">Specialty/region-scale EVA lines</span></div>
            </div>

            <div class="capacity-card">
              <div class="capacity-title"><i class="fas fa-industry"></i>
                <span data-i18n-en="Maximum Single-Train Capacity" data-i18n-fa="حداکثر ظرفیت تک‌لاین">Maximum Single-Train Capacity</span>
              </div>
              <div class="capacity-value"><span data-i18n-en="Up to ~450K T/Y (tubular technology)" data-i18n-fa="تا حدود ۴۵۰ هزار تن/سال (تیوبولار)">Up to ~450K T/Y (tubular technology)</span></div>
              <div class="capacity-location"><span data-i18n-en="World-scale high-pressure complexes" data-i18n-fa="مجتمع‌های پرفشار مقیاس‌جهانی">World-scale high-pressure complexes</span></div>
            </div>
          </div>

          <div class="capacity-note">
            <span
              data-i18n-en="EVA economics depend strongly on VA content (grade), reactor configuration, energy/compression, and downstream finishing (films, sheets, encapsulant)."
              data-i18n-fa="اقتصاد EVA به‌شدت به درصد VA (گرید)، پیکربندی راکتور، انرژی/کمپرسورها و تکمیل پایین‌دستی (فیلم، ورق، انکپسولنت) وابسته است."
            >EVA economics depend strongly on VA content (grade), reactor configuration, energy/compression, and downstream finishing (films, sheets, encapsulant).</span>
          </div>
        </div>

        <!-- Applications -->
        <div class="applications-section">
          <div class="applications-header">
            <div class="section-icon"><i class="fas fa-building"></i></div>
            <h2 class="applications-title"><span data-i18n-en="Industry Applications" data-i18n-fa="کاربردهای صنعتی">Industry Applications</span></h2>
          </div>

          <div class="industry-tags">
            <div class="industry-tag"><span data-i18n-en="Solar PV Encapsulant" data-i18n-fa="انکپسولنت پنل خورشیدی">Solar PV Encapsulant</span></div>
            <div class="industry-tag"><span data-i18n-en="Foams (Footwear)" data-i18n-fa="فوم‌ها (کفش)">Foams (Footwear)</span></div>
            <div class="industry-tag"><span data-i18n-en="Hot-Melt Adhesives" data-i18n-fa="چسب‌های هات‌ملت">Hot-Melt Adhesives</span></div>
            <div class="industry-tag"><span data-i18n-en="Films &amp; Packaging" data-i18n-fa="فیلم و بسته‌بندی">Films &amp; Packaging</span></div>
            <div class="industry-tag"><span data-i18n-en="Wire &amp; Cable" data-i18n-fa="سیم و کابل">Wire &amp; Cable</span></div>
          </div>

          <div class="application-chart">
            <canvas id="applicationsChart" width="400" height="220"></canvas>
          </div>

          <div class="chart-legend">
            <div class="legend-item"><span class="legend-color" style="background-color:#2563eb;"></span>
              <span><span data-i18n-en="PV Encapsulant (40%)" data-i18n-fa="انکپسولنت خورشیدی (۴۰٪)">PV Encapsulant (40%)</span></span>
            </div>
            <div class="legend-item"><span class="legend-color" style="background-color:#8b5cf6;"></span>
              <span><span data-i18n-en="Foams (20%)" data-i18n-fa="فوم‌ها (۲۰٪)">Foams (20%)</span></span>
            </div>
            <div class="legend-item"><span class="legend-color" style="background-color:#10b981;"></span>
              <span><span data-i18n-en="Adhesives (15%)" data-i18n-fa="چسب‌ها (۱۵٪)">Adhesives (15%)</span></span>
            </div>
            <div class="legend-item"><span class="legend-color" style="background-color:#f59e0b;"></span>
              <span><span data-i18n-en="Films/Packaging (15%)" data-i18n-fa="فیلم/بسته‌بندی (۱۵٪)">Films/Packaging (15%)</span></span>
            </div>
            <div class="legend-item"><span class="legend-color" style="background-color:#ef4444;"></span>
              <span><span data-i18n-en="Wire/Cable & Others (10%)" data-i18n-fa="سیم/کابل و سایر (۱۰٪)">Wire/Cable & Others (10%)</span></span>
            </div>
          </div>
        </div>

        <!-- Technology Providers -->
        <div class="section-card">
          <div class="section-header license-header">
            <div class="section-icon"><i class="fas fa-certificate"></i></div>
            <h2 class="section-title"><span data-i18n-en="Top Technology License Providers" data-i18n-fa="برترین لایسنسورها/ارائه‌دهندگان فناوری">Top Technology License Providers</span></h2>
          </div>

          <p style="color:#475569;margin-bottom:15px;line-height:1.5;">
            <span
              data-i18n-en="EVA is commonly manufactured using LDPE-style high-pressure free-radical reactor technologies (tubular/autoclave), with downstream extrusion/pelletizing and finishing for films/sheets/encapsulant."
              data-i18n-fa="EVA معمولاً با فناوری‌های پلیمریزاسیون رادیکالی پرفشار مشابه LDPE (تیوبولار/اتوکلاو) تولید می‌شود و سپس اکستروژن/پلت‌سازی و تکمیل برای فیلم/ورق/انکپسولنت انجام می‌گردد."
            >EVA is commonly manufactured using LDPE-style high-pressure free-radical reactor technologies (tubular/autoclave), with downstream extrusion/pelletizing and finishing for films/sheets/encapsulant.</span>
          </p>

          <div class="license-providers">
            <div class="provider-item"><div class="provider-rank">1</div><div class="provider-info">
              <div class="provider-name">LyondellBasell (Lupotech T / A)</div>
              <div class="provider-details"><span data-i18n-en="High-pressure tubular/autoclave | LDPE/EVA" data-i18n-fa="تیوبولار/اتوکلاو پرفشار | LDPE/EVA">High-pressure tubular/autoclave | LDPE/EVA</span></div>
              <div class="provider-licenses"><span data-i18n-en="World-scale licensing; broad EVA grade capability" data-i18n-fa="لایسنس مقیاس‌جهانی؛ سبد گرید گسترده EVA">World-scale licensing; broad EVA grade capability</span></div>
            </div></div>

            <div class="provider-item"><div class="provider-rank">2</div><div class="provider-info">
              <div class="provider-name">Major Integrated Producers</div>
              <div class="provider-details"><span data-i18n-en="EVA manufacturing know-how | Global" data-i18n-fa="دانش فنی تولید EVA | جهانی">EVA manufacturing know-how | Global</span></div>
              <div class="provider-licenses"><span data-i18n-en="Grade development for PV/foam/adhesive markets" data-i18n-fa="توسعه گرید برای PV/فوم/چسب">Grade development for PV/foam/adhesive markets</span></div>
            </div></div>

            <div class="provider-item"><div class="provider-rank">3</div><div class="provider-info">
              <div class="provider-name">Engineering &amp; Compounding Houses</div>
              <div class="provider-details"><span data-i18n-en="Extrusion, film/sheet, lamination lines" data-i18n-fa="لاین‌های اکستروژن، فیلم/ورق، لمینیشن">Extrusion, film/sheet, lamination lines</span></div>
              <div class="provider-licenses"><span data-i18n-en="Downstream finishing for encapsulant & films" data-i18n-fa="تکمیل پایین‌دستی برای انکپسولنت و فیلم">Downstream finishing for encapsulant & films</span></div>
            </div></div>

            <div class="provider-item"><div class="provider-rank">4</div><div class="provider-info">
              <div class="provider-name">Catalyst / Additives Suppliers</div>
              <div class="provider-details"><span data-i18n-en="Peroxide initiators & stabilizers" data-i18n-fa="آغازگرهای پراکسیدی و پایدارکننده‌ها">Peroxide initiators & stabilizers</span></div>
              <div class="provider-licenses"><span data-i18n-en="Formulation support and thermal stability" data-i18n-fa="پشتیبانی فرمولاسیون و پایداری حرارتی">Formulation support and thermal stability</span></div>
            </div></div>
          </div>
        </div>

      </div><!-- /main-content -->

      <!-- Sidebar -->
      <div class="sidebar">

        <div class="market-insights">
          <div class="market-header">
            <div class="section-icon"><i class="fas fa-chart-pie"></i></div>
            <h2 class="market-title"><span data-i18n-en="Global Demand Analysis" data-i18n-fa="تحلیل تقاضای جهانی">Global Demand Analysis</span></h2>
          </div>

          <p class="market-description">
            <span
              data-i18n-en="Demand is driven by solar encapsulant growth, footwear foams, adhesives, and packaging films. Regional mix typically follows PV module manufacturing and polymer converting hubs."
              data-i18n-fa="تقاضا عمدتاً با رشد انکپسولنت خورشیدی، فوم‌های کفش، چسب‌ها و فیلم‌های بسته‌بندی هدایت می‌شود. ترکیب منطقه‌ای معمولاً از قطب‌های تولید پنل خورشیدی و تبدیل پلیمرها پیروی می‌کند."
            >Demand is driven by solar encapsulant growth, footwear foams, adhesives, and packaging films. Regional mix typically follows PV module manufacturing and polymer converting hubs.</span>
          </p>

          <div class="demand-chart-container">
            <canvas id="demandChart" width="400" height="250"></canvas>
          </div>

          <div class="chart-legend">
            <div class="legend-item"><span class="legend-color" style="background-color:#2563eb;"></span>
              <span><span data-i18n-en="Asia-Pacific (55%)" data-i18n-fa="آسیا-اقیانوسیه (۵۵٪)">Asia-Pacific (55%)</span></span>
            </div>
            <div class="legend-item"><span class="legend-color" style="background-color:#8b5cf6;"></span>
              <span><span data-i18n-en="North America (18%)" data-i18n-fa="آمریکای شمالی (۱۸٪)">North America (18%)</span></span>
            </div>
            <div class="legend-item"><span class="legend-color" style="background-color:#10b981;"></span>
              <span><span data-i18n-en="Europe (22%)" data-i18n-fa="اروپا (۲۲٪)">Europe (22%)</span></span>
            </div>
            <div class="legend-item"><span class="legend-color" style="background-color:#f59e0b;"></span>
              <span><span data-i18n-en="Middle East & Africa (5%)" data-i18n-fa="خاورمیانه و آفریقا (۵٪)">Middle East &amp; Africa (5%)</span></span>
            </div>
          </div>
        </div>

        <div class="key-commodity">
          <div class="companies-header">
            <div class="section-icon"><i class="fas fa-industry"></i></div>
            <h2 class="companies-title"><span data-i18n-en="Production Snapshot" data-i18n-fa="نمای تولید">Production Snapshot</span></h2>
          </div>

          <div class="property-grid" style="grid-template-columns:1fr;">
            <div class="property-item">
              <div class="property-label"><span data-i18n-en="Common Reactor Types" data-i18n-fa="انواع رایج راکتور">Common Reactor Types</span></div>
              <div class="property-value" style="color:var(--primary);"><span data-i18n-en="Tubular / Autoclave (HP)" data-i18n-fa="تیوبولار / اتوکلاو (پرفشار)">Tubular / Autoclave (HP)</span></div>
            </div>
            <div class="property-item">
              <div class="property-label"><span data-i18n-en="Grade Driver" data-i18n-fa="عامل تعیین‌کننده گرید">Grade Driver</span></div>
              <div class="property-value" style="color:var(--primary);"><span data-i18n-en="VA content + MFI" data-i18n-fa="درصد VA + شاخص جریان مذاب">VA content + MFI</span></div>
            </div>
            <div class="property-item">
              <div class="property-label"><span data-i18n-en="Key Growth Application" data-i18n-fa="کاربرد رشددهنده اصلی">Key Growth Application</span></div>
              <div class="property-value" style="color:var(--primary);"><span data-i18n-en="Solar PV encapsulant" data-i18n-fa="انکپسولنت پنل خورشیدی">Solar PV encapsulant</span></div>
            </div>
          </div>
        </div>

        <!-- CAPEX card (kept structure) -->
        <div class="section-card">
          <div class="section-header">
            <div class="section-icon" style="background:rgba(239,115,51,0.1);color:#ef7333;"><i class="fas fa-calculator"></i></div>
            <h2 class="section-title"><span data-i18n-en="Capital Expenditure Analysis" data-i18n-fa="تحلیل هزینه سرمایه‌گذاری (CAPEX)">Capital Expenditure Analysis</span></h2>
          </div>

          <p style="color:#475569;margin-bottom:20px;line-height:1.5;">
            <span
              data-i18n-en="EVA CAPEX is dominated by high-pressure compression/reactor section, monomer handling, safety systems, recycle separation, and downstream extrusion/pelletizing. Exact CAPEX depends on scale, grade slate, utilities, and local execution costs."
              data-i18n-fa="CAPEX EVA عمدتاً شامل بخش کمپرسور/راکتور پرفشار، هندل مونومر، سیستم‌های ایمنی، جداسازی/ریکاوری و اکستروژن/پلت‌سازی است. CAPEX دقیق به ظرفیت، سبد گرید، یوتیلیتی‌ها و هزینه‌های اجرایی محلی وابسته است."
            >EVA CAPEX is dominated by high-pressure compression/reactor section, monomer handling, safety systems, recycle separation, and downstream extrusion/pelletizing. Exact CAPEX depends on scale, grade slate, utilities, and local execution costs.</span>
          </p>

          <div style="display:flex;flex-direction:column;gap:25px;">
            <div style="background:#f8fafc;border-radius:16px;padding:20px;border-left:4px solid #ef7333;">
              <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:15px;">
                <h3 style="font-weight:600;color:var(--dark);display:flex;align-items:center;gap:8px;">
                  <i class="fas fa-industry" style="color:#ef7333;"></i>
                  <span data-i18n-en="CAPEX Status" data-i18n-fa="وضعیت CAPEX">CAPEX Status</span>
                </h3>
                <div style="background:rgba(239,115,51,0.1);color:#ef7333;padding:5px 12px;border-radius:12px;font-weight:600;">
                  <span data-i18n-en="Project-specific" data-i18n-fa="پروژه‌محور">Project-specific</span>
                </div>
              </div>

              <div style="font-family:'Space Grotesk',sans-serif;font-size:2.2rem;font-weight:700;color:#ef7333;margin-bottom:10px;text-align:center;">
                <span data-i18n-en="—" data-i18n-fa="—">—</span>
              </div>

              <div style="text-align:center;color:#64748b;font-size:0.95rem;margin-bottom:15px;">
                <span data-i18n-en="High-pressure reactor + compression is the main cost driver" data-i18n-fa="بخش راکتور/کمپرسور پرفشار محرک اصلی هزینه است">High-pressure reactor + compression is the main cost driver</span>
              </div>

              <div style="height:6px;background:#e2e8f0;border-radius:3px;overflow:hidden;position:relative;">
                <div style="position:absolute;top:0;left:0;height:100%;width:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.5),transparent);transform:translateX(-100%);animation:shimmer 1.5s infinite;"></div>
                <div style="height:100%;width:70%;background:linear-gradient(to right,#f97316,#ef7333);border-radius:3px;"></div>
              </div>
            </div>
          </div>
        </div>

        <!-- Key Manufacturers -->
        <div class="key-companies">
          <div class="companies-header">
            <div class="section-icon"><i class="fas fa-city"></i></div>
            <h2 class="companies-title"><span data-i18n-en="Key Manufacturers (Examples)" data-i18n-fa="تولیدکنندگان کلیدی (نمونه)">Key Manufacturers (Examples)</span></h2>
          </div>

          <ul class="company-list">
            <li class="company-item">
              <div class="company-flag"><span data-i18n-en="US" data-i18n-fa="آمریکا">US</span></div>
              <div>
                <div class="company-name">ExxonMobil</div>
                <div class="company-country"><span data-i18n-en="EVA grades for packaging/adhesive applications" data-i18n-fa="گریدهای EVA برای بسته‌بندی/چسب">EVA grades for packaging/adhesive applications</span></div>
              </div>
            </li>

            <li class="company-item">
              <div class="company-flag"><span data-i18n-en="US" data-i18n-fa="آمریکا">US</span></div>
              <div>
                <div class="company-name">Dow</div>
                <div class="company-country"><span data-i18n-en="EVA for adhesives, films, and specialty uses" data-i18n-fa="EVA برای چسب‌ها، فیلم‌ها و کاربردهای تخصصی">EVA for adhesives, films, and specialty uses</span></div>
              </div>
            </li>

            <li class="company-item">
              <div class="company-flag"><span data-i18n-en="KR" data-i18n-fa="کره">KR</span></div>
              <div>
                <div class="company-name">LG Chem / Asian Producers</div>
                <div class="company-country"><span data-i18n-en="Strong downstream PV/foam demand linkage" data-i18n-fa="ارتباط قوی با تقاضای PV/فوم">Strong downstream PV/foam demand linkage</span></div>
              </div>
            </li>

            <li class="company-item">
              <div class="company-flag"><span data-i18n-en="ES" data-i18n-fa="اسپانیا">ES</span></div>
              <div>
                <div class="company-name">Repsol / EU Producers</div>
                <div class="company-country"><span data-i18n-en="Regional EVA supply for films and compounds" data-i18n-fa="تأمین منطقه‌ای EVA برای فیلم‌ها و کامپاندها">Regional EVA supply for films and compounds</span></div>
              </div>
            </li>

            <li class="company-item">
              <div class="company-flag"><span data-i18n-en="CN" data-i18n-fa="چین">CN</span></div>
              <div>
                <div class="company-name">Chinese Integrated Producers</div>
                <div class="company-country"><span data-i18n-en="Growing EVA capacity tied to PV value chain" data-i18n-fa="رشد ظرفیت EVA همسو با زنجیره PV">Growing EVA capacity tied to PV value chain</span></div>
              </div>
            </li>
          </ul>
        </div>

      </div><!-- /sidebar -->
    </div><!-- /content-grid -->

    <div class="design-credit">
      <div class="credit-header">
        <div class="credit-icon"><i class="fas fa-hard-hat"></i></div>
        <h2 class="credit-title"><span data-i18n-en="Engineering Design Credit" data-i18n-fa="هزینه طراحی مهندسی">Engineering Design Credit</span></h2>
      </div>
      <div class="credit-details">
        <p><span data-i18n-en="This chemical database entry was developed and designed by Ali Hosseinpour." data-i18n-fa="این پایگاه‌داده شیمیایی توسط علی حسین‌پور گردآوری و تدوین شده است.">This chemical database entry was developed and designed by Ali Hosseinpour.</span></p>
      </div>
      <div class="contact-info">
        <a class="contact-item" href="tel:+989162926778"><i class="fas fa-phone"></i><span>+989162926778</span></a>
        <a class="contact-item" href="mailto:hosseinpour431@gmail.com"><i class="fas fa-envelope"></i><span>hosseinpour431@gmail.com</span></a>
      </div>
    </div>

    <footer>
      <p><span data-i18n-en="Chemical Farm © 2025 | Comprehensive chemical intelligence for industry professionals" data-i18n-fa="کمیکال فارم © 2025| هوشمندی جامع شیمی برای متخصصان صنعت">Chemical Farm © 2025 | Comprehensive chemical intelligence for industry professionals</span></p>
      <p class="footer-note"><span data-i18n-en="Data verified through authoritative chemical databases and industry reports" data-i18n-fa="داده‌ها با اتکا به پایگاه‌های معتبر شیمیایی و گزارش‌های صنعتی راستی‌آزمایی شده‌اند">Data verified through authoritative chemical databases and industry reports</span></p>
    </footer>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      initMolecularVisualization();
      initDemandPieChart();
      initApplicationsPieChart();

      document.querySelectorAll('.company-item').forEach(item => {
        item.addEventListener('click', function() {
          const companyName = this.querySelector('.company-name')?.textContent || 'Company';
          alert(`Viewing detailed information for ${companyName}...`);
        });
      });

      const processTemplates = {
        hp: {
          infoHTML: `
            <i class="fas fa-info-circle" style="margin-inline-end: 6px; color: var(--primary);"></i>
            <span data-i18n-en="EVA is manufactured via " data-i18n-fa="EVA از مسیر ">EVA is manufactured via </span>
            <span class="process-highlight"><span data-i18n-en="high-pressure tubular/autoclave free-radical copolymerization" data-i18n-fa="کوپلیمریزاسیون رادیکالی پرفشار در راکتور تیوبولار/اتوکلاو">high-pressure tubular/autoclave free-radical copolymerization</span></span>
            <span data-i18n-en=" of ethylene with vinyl acetate, then separated, recycled, extruded and pelletized." data-i18n-fa=" اتیلن با وینیل‌استات، سپس جداسازی/ریکاوری، اکستروژن و پلت‌سازی."> of ethylene with vinyl acetate, then separated, recycled, extruded and pelletized.</span>
          `,
          stages: [
            { en:"Ethylene is compressed to high pressure; vinyl acetate is metered as comonomer under controlled conditions.", fa:"اتیلن تا فشارهای بالا متراکم می‌شود؛ وینیل‌استات به‌عنوان کومونومر با کنترل دقیق تزریق می‌گردد." },
            { en:"Free-radical polymerization is initiated (often peroxides) in tubular or autoclave reactors depending on grade slate.", fa:"پلیمریزاسیون رادیکالی با آغازگرها (اغلب پراکسیدها) در راکتور تیوبولار یا اتوکلاو انجام می‌شود (وابسته به سبد گرید)." },
            { en:"Polymer/gas separation and recycle recover unreacted monomers; pellet degassing controls residuals.", fa:"با جداسازی پلیمر/گاز و ریسایکل، مونومرهای واکنش‌نداده بازیابی می‌شوند؛ دی‌گسینگ گرانول باقی‌مانده‌ها را کنترل می‌کند." },
            { en:"Extrusion and pelletizing produce stable pellets; additives may be incorporated for processing/aging performance.", fa:"اکستروژن و پلت‌سازی گرانول پایدار تولید می‌کند؛ افزودنی‌ها برای بهبود فرآیند/پایداری قابل افزودن هستند." }
          ]
        },
        comp: {
          infoHTML: `
            <i class="fas fa-info-circle" style="margin-inline-end: 6px; color: var(--primary);"></i>
            <span data-i18n-en="Downstream value is created via " data-i18n-fa="ارزش افزوده پایین‌دستی از طریق ">Downstream value is created via </span>
            <span class="process-highlight"><span data-i18n-en="film/sheet extrusion, lamination, and encapsulant formulation" data-i18n-fa="اکستروژن فیلم/ورق، لمینیشن و فرمولاسیون انکپسولنت">film/sheet extrusion, lamination, and encapsulant formulation</span></span>
            <span data-i18n-en=" for solar and packaging applications." data-i18n-fa=" برای کاربردهای خورشیدی و بسته‌بندی."> for solar and packaging applications.</span>
          `,
          stages: [
            { en:"Pellets are dried/conditioned (as required) for stable extrusion and defect control.", fa:"در صورت نیاز، گرانول‌ها برای اکستروژن پایدار و کنترل عیوب خشک/شرطی‌سازی می‌شوند." },
            { en:"Extrusion produces films/sheets; process window depends on VA content, MFI, and additives.", fa:"اکستروژن فیلم/ورق تولید می‌کند؛ پنجره فرآیندی تابع درصد VA، MFI و افزودنی‌هاست." },
            { en:"Lamination/crosslinking packages may be applied for PV encapsulant specifications (optics, adhesion, durability).", fa:"برای انکپسولنت PV، پکیج‌های لمینیشن/کراس‌لینک مطابق مشخصات (اپتیک، چسبندگی، دوام) اعمال می‌شود." },
            { en:"Finished rolls/sheets are quality-checked (gel count, haze, adhesion) and packed for converters.", fa:"محصول نهایی از نظر کیفیت (ژل، هِیز، چسبندگی) کنترل و برای مصرف‌کنندگان بسته‌بندی می‌شود." }
          ]
        }
      };

      function setProcess(processType){
        const tpl = processTemplates[processType] || processTemplates.hp;
        const infoBox = document.querySelector('.process-info');
        if (infoBox) infoBox.innerHTML = tpl.infoHTML;

        const stageDescs = Array.from(document.querySelectorAll('.stage-description'));
        stageDescs.forEach((node, i)=>{
          const st = tpl.stages[i];
          if (!st) return;
          node.innerHTML = `<span data-i18n-en="${st.en.replace(/"/g,'&quot;')}" data-i18n-fa="${st.fa.replace(/"/g,'&quot;')}">${st.en}</span>`;
        });

        if (window.ChemI18n && typeof window.ChemI18n.refresh === 'function') window.ChemI18n.refresh();
      }

      document.querySelectorAll('.process-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          document.querySelectorAll('.process-btn').forEach(b => b.classList.remove('active'));
          this.classList.add('active');
          setProcess(this.getAttribute('data-process'));
        });
      });
      const activeBtn = document.querySelector('.process-btn.active');
      setProcess(activeBtn ? activeBtn.getAttribute('data-process') : 'hp');

      setTimeout(() => {
        document.querySelectorAll('.section-card, .market-insights, .key-companies, .key-commodity').forEach((card, index) => {
          setTimeout(() => { card.style.opacity = '1'; card.style.transform = 'translateY(0)'; }, 150 * index);
        });
      }, 100);
    });

    function initDemandPieChart() {
      const el = document.getElementById('demandChart');
      if (!el) return;
      const ctx = el.getContext('2d');
      new Chart(ctx, {
        type: 'pie',
        data: {
          labels: ['Asia-Pacific', 'North America', 'Europe', 'Middle East & Africa'],
          datasets: [{
            data: [55, 18, 22, 5],
            backgroundColor: ['#2563eb','#8b5cf6','#10b981','#f59e0b'],
            borderWidth: 1
          }]
        },
        options: {
          responsive:true,
          maintainAspectRatio:false,
          plugins:{ legend:{display:false}, tooltip:{callbacks:{label:c=>`${c.label}: ${c.parsed}%`}} }
        }
      });
    }

    function initApplicationsPieChart() {
      const el = document.getElementById('applicationsChart');
      if (!el) return;
      const ctx = el.getContext('2d');
      new Chart(ctx, {
        type: 'pie',
        data: {
          labels: ['PV Encapsulant', 'Foams', 'Adhesives', 'Films/Packaging', 'Wire/Cable & Others'],
          datasets: [{
            data: [40, 20, 15, 15, 10],
            backgroundColor: ['#2563eb','#8b5cf6','#10b981','#f59e0b','#ef4444'],
            borderWidth: 1
          }]
        },
        options: {
          responsive:true,
          maintainAspectRatio:false,
          plugins:{ legend:{display:false}, tooltip:{callbacks:{label:c=>`${c.label}: ${c.parsed}%`}} }
        }
      });
    }

    function initMolecularVisualization() {
      const container = document.getElementById('molecular-canvas');
      if (!container) return;

      const scene = new THREE.Scene();
      scene.background = new THREE.Color(getComputedStyle(document.documentElement).getPropertyValue('--molecule-bg').trim() || '#f8fafc');

      const camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
      camera.position.z = 8.2;

      const renderer = new THREE.WebGLRenderer({ antialias:true, alpha:true });
      renderer.setSize(container.clientWidth, container.clientHeight);
      container.appendChild(renderer.domElement);

      scene.add(new THREE.AmbientLight(0xffffff, 0.65));
      const dl = new THREE.DirectionalLight(0xffffff, 0.85);
      dl.position.set(1,1,1);
      scene.add(dl);

      const g = new THREE.Group();
      scene.add(g);

      function atom(pos, color, size, name){
        const geo = new THREE.SphereGeometry(size, 24, 24);
        const mat = new THREE.MeshPhongMaterial({ color, shininess: 110, specular: 0x333333 });
        const m = new THREE.Mesh(geo, mat);
        m.position.copy(pos);
        m.userData = { name };
        g.add(m);
        return m;
      }

      function bond(a, b, color){
        const dir = new THREE.Vector3().subVectors(b.position, a.position);
        const mid = new THREE.Vector3().addVectors(a.position, b.position).multiplyScalar(0.5);
        const len = dir.length();

        const geo = new THREE.CylinderGeometry(0.10, 0.10, len, 24);
        const mat = new THREE.MeshPhongMaterial({ color, shininess: 60 });
        const c = new THREE.Mesh(geo, mat);
        c.position.copy(mid);
        c.lookAt(b.position);
        c.rotateX(Math.PI/2);
        g.add(c);
        return c;
      }

      // Simplified EVA copolymer segment:
      // Backbone: 6 carbons
      // Side group: acetate on one carbon (two oxygens + carbonyl carbon)
      const spacing = 0.50;
      const startX = -1.25;

      const C = [];
      for (let i=0;i<6;i++){
        C.push(atom(new THREE.Vector3(startX + i*spacing, 0, 0), 0x1e40af, 0.24, 'C'));
      }
      for (let i=0;i<5;i++) bond(C[i], C[i+1], 0x475569);

      // acetate side group attached to carbon 3 (index 2)
      const attach = C[2];
      const cAc = atom(new THREE.Vector3(attach.position.x, 0.55, 0.15), 0x1e40af, 0.22, 'C'); // carbonyl carbon (blue for C)
      bond(attach, cAc, 0x475569);

      const o1 = atom(new THREE.Vector3(attach.position.x - 0.35, 0.85, 0.10), 0xef4444, 0.20, 'O'); // carbonyl oxygen
      const o2 = atom(new THREE.Vector3(attach.position.x + 0.35, 0.85, 0.20), 0xef4444, 0.20, 'O'); // ester oxygen
      bond(cAc, o1, 0x475569);
      bond(cAc, o2, 0x475569);

      const cMe = atom(new THREE.Vector3(attach.position.x + 0.70, 1.10, 0.30), 0x1e40af, 0.22, 'C'); // methyl carbon
      bond(o2, cMe, 0x475569);

      // a few hydrogens (illustrative)
      const H = (x,y,z)=>atom(new THREE.Vector3(x,y,z), 0x64748b, 0.15, 'H');
      bond(C[0], H(C[0].position.x-0.25, 0.28, 0.10), 0x475569);
      bond(C[0], H(C[0].position.x-0.25,-0.28,-0.10), 0x475569);
      bond(C[5], H(C[5].position.x+0.25, 0.28,-0.10), 0x475569);

      g.rotation.y = 0.55;
      g.rotation.x = 0.18;

      function animate(){
        requestAnimationFrame(animate);
        g.rotation.y += 0.004;
        g.rotation.x += 0.0012;
        renderer.render(scene, camera);
      }

      window.addEventListener('resize', () => {
        camera.aspect = container.clientWidth / container.clientHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(container.clientWidth, container.clientHeight);
      });

      window.addEventListener('chemThemeChange', () => {
        try{
          const bg = getComputedStyle(document.documentElement).getPropertyValue('--molecule-bg').trim() || '#f8fafc';
          scene.background = new THREE.Color(bg);
          renderer.render(scene, camera);
        }catch(e){}
      });

      animate();
    }
  </script>

  <script>
    (function(){
      const langBtn = document.getElementById('langToggle');
      const langLabel = document.getElementById('langLabel');
      const themeBtn = document.getElementById('themeToggle');

      function renderI18n(el, lang){
        const en = el.getAttribute('data-i18n-en') ?? '';
        const fa = el.getAttribute('data-i18n-fa') ?? '';
        if (el.tagName === 'TITLE'){ el.textContent = (lang === 'fa') ? fa : en; return; }
        el.textContent = (lang === 'fa') ? fa : en;
      }
      function applyLang(lang){
        document.documentElement.setAttribute('lang', lang);
        document.documentElement.setAttribute('dir', lang === 'fa' ? 'rtl' : 'ltr');
        if (langLabel) langLabel.textContent = (lang === 'fa') ? 'EN' : 'FA';
        document.querySelectorAll('[data-i18n-en][data-i18n-fa]').forEach(el => renderI18n(el, lang));
      }
      function getLang(){ return document.documentElement.getAttribute('lang') || 'en'; }

      function applyTheme(theme){
        document.documentElement.setAttribute('data-theme', theme);
        const icon = themeBtn?.querySelector('i');
        if (icon){
          icon.classList.remove('fa-moon','fa-sun');
          icon.classList.add(theme === 'dark' ? 'fa-sun' : 'fa-moon');
        }
        window.dispatchEvent(new CustomEvent('chemThemeChange', { detail: { theme } }));
      }
      function getTheme(){ return document.documentElement.getAttribute('data-theme') || 'light'; }

      window.ChemI18n = { applyLang, getLang, refresh: ()=>applyLang(getLang()) };

      const savedLang = localStorage.getItem('chem_lang');
      const autoLang = (navigator.language || '').toLowerCase().startsWith('fa') ? 'fa' : 'en';
      applyLang(savedLang || autoLang);

      langBtn?.addEventListener('click', ()=>{
        const next = getLang() === 'fa' ? 'en' : 'fa';
        localStorage.setItem('chem_lang', next);
        applyLang(next);
      });

      const savedTheme = localStorage.getItem('chem_theme');
      const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
      applyTheme(savedTheme || (prefersDark ? 'dark' : 'light'));

      themeBtn?.addEventListener('click', ()=>{
        const next = getTheme() === 'dark' ? 'light' : 'dark';
        localStorage.setItem('chem_theme', next);
        applyTheme(next);
      });
    })();
  </script>
</body>




</html>